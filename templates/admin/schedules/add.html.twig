{% extends 'base.html.twig' %}


{% block title %}Ajouter un Horaire{% endblock %}

{% block body %}
    <div class="containerAdmin">
        <div class="row">
            {% include "_partials/_adminnav.html.twig" %}

            <main class="col-9 border bg-white p-2">
                <h4>Ajouter un Horaire</h4>

                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">{{ message }}</div>
                {% endfor %}
                {% for message in app.flashes('error') %}
                    <div class="alert alert-danger">{{ message }}</div>
                {% endfor %}

                <form action="{{ path('add_schedule') }}" method="post">
                    <label for="name">Nom :</label>
                    <input type="text" name="name" required>

                    <h5>Horaires par jour</h5>
                    {% for day in ['lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi', 'dimanche'] %}
                        <div>
                            <label>Jour : {{ day }}</label>
                            <input type="hidden" name="entries[{{ loop.index0 }}][day]" value="{{ day }}">
                            
                            <label>Ouverture :</label>
                            <input type="time" name="entries[{{ loop.index0 }}][open]" required>

                            <label>Fermeture :</label>
                            <input type="time" name="entries[{{ loop.index0 }}][close]" required>

                            <label>
                                <input type="checkbox" name="closed[{{ loop.index0 }}]" value="1">
                                Jour de fermeture
                            </label>
                        </div>
                    {% endfor %}

                    <h5>Exceptions</h5>
                    <div>
                        <label>Date :</label>
                        <input type="date" name="exceptions[0][date]" value="{{ exception.date | default('') }}">
                        <label>Ouverture :</label>
                        <input type="text" name="exceptions[0][open]" value="{{ exception.open | default('') }}">
                    </div>


                    <button type="submit">Ajouter</button>
                </form>

                <a href="{{ path('schedules_list') }}">Retour Ã  la liste</a>
            </main>
        </div>
    </div>

    {% block javascripts %}
        <script src="{{ asset('js/schedules.js') }}"></script>
    {% endblock %}
    
{% endblock %}
